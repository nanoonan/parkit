# pylint: disable = not-callable
import multiprocessing

from parkit.typeddicts import Profiles

PID_FILENAME_PREFIX: str = 'parkit-'
PID_FILENAME_EXTENSION: str = '.pid'

DEFAULT_MONITOR_POLLING_INTERVAL: float = 5
DEFAULT_TASKER_POLLING_INTERVAL: float = 0.1
DEFAULT_ADAPTER_POLLING_INTERVAL: float = 0.02

PARKIT_TEMP_INSTALLATION_DIRNAME: str = 'parkit'

INSTALL_PATH_ENVNAME: str = 'PARKIT_INSTALL_PATH'

LMDB_WRITE_MAP_ENVNAME: str = 'LMDB_WRITE_MAP'
LMDB_MAP_ASYNC_ENVNAME: str = 'LMDB_MAP_ASYNC'
LMDB_METASYNC_ENVNAME: str = 'LMDB_METASYNC'
LMDB_MAX_DBS_ENVNAME: str = 'LMDB_MAX_DBS'
LMDB_READONLY_ENVNAME: str = 'LMDB_READONLY'
LMDB_SYNC_ENVNAME: str = 'LMDB_SYNC'
LMDB_READAHEAD_ENVNAME: str = 'LMDB_READAHEAD'
LMDB_MEMINIT_ENVNAME: str = 'LMDB_MEMINIT'
LMDB_MAX_SPARE_TXNS_ENVNAME: str = 'LMDB_MAX_SPARE_TXNS'
LMDB_MAX_READERS_ENVNAME: str = 'LMDB_MAX_READERS'
LMDB_PROFILE_ENVNAME: str = 'LMDB_PROFILE'

DEFAULT_LMDB_MAP_SIZE: int = 1073741824

LMDB_PROFILES = Profiles(
	volatile = {
		'LMDB_WRITE_MAP': True,
		'LMDB_METASYNC': False,
		'LMDB_MAP_ASYNC': False,
		'LMDB_MAX_DBS': 65536,
		'LMDB_READONLY': False,
		'LMDB_SYNC': False,
		'LMDB_READAHEAD': True,
		'LMDB_MEMINIT': False,
		'LMDB_MAX_SPARE_TXNS': 1024,
		'LMDB_MAX_READERS': 1024
	},
	persistent = {
		'LMDB_WRITE_MAP': True,
		'LMDB_METASYNC': True,
		'LMDB_MAP_ASYNC': True,
		'LMDB_MAX_DBS': 65536,
		'LMDB_READONLY': False,
		'LMDB_SYNC': True,
		'LMDB_READAHEAD': False,
		'LMDB_MEMINIT': False,
		'LMDB_MAX_SPARE_TXNS': multiprocessing.cpu_count(),
		'LMDB_MAX_READERS': 64
	}
)

SETTINGS_NAMESPACE: str = 'settings'
DEFAULT_NAMESPACE: str = 'default'
PROCESS_NAMESPACE: str = 'process'
PERSISTENT_NAMESPACE: str = 'persistent'
SYSLOG_NAMESPACE: str = 'syslog'

PROCESS_QUEUE_PATH: str = 'process/__process_queue__'
SYSLOG_PATH: str = 'syslog/syslog'

SETTINGS_DATABASE: str = '__settings__'
ATTRIBUTE_DATABASE: str = '__attribute__'
VERSION_DATABASE: str = '__version__'
NAME_DATABASE: str = '__name__'
DESCRIPTOR_DATABASE: str = '__descriptor__'
